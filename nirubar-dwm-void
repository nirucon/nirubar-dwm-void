#!/bin/sh

# Light Status bar for Void Linux with dwm using xsetroot

# Dependencies:
#   sudo xbps-install -S xsetroot jq

# Function to check if Font Awesome is installed
check_font_awesome() {
    fc-list | grep -q -i "Font Awesome"
}

# Set identifier based on font availability
IDENTIFIER=$(check_font_awesome && echo "fontawesome" || echo "text")

# Define functions for each module

module_date() {
    date "+%Y-%m-%d %H:%M"
}

module_resources() {
    free_output=$(free -h | awk '/^Mem:/ {print $3 "/" $2}')
    disk_output=$(df -h / | awk 'END{print $3 "/" $2}')
    printf " %s  %s" "$free_output" "$disk_output"
}

# Main loop
while true; do
    STATUS_OUTPUT=""
    STATUS_OUTPUT+="| $(module_resources)"
    STATUS_OUTPUT+=" | $(module_date)"

    xsetroot -name "$STATUS_OUTPUT"
    sleep 1
done
